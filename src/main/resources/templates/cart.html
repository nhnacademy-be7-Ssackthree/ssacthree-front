<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="common/config :: config">
</head>
<body>

<header th:replace="common/header :: header"></header>

<div class="container mt-5">
  <h2>장바구니</h2>

  <!-- 장바구니 상품 리스트 -->
  <div class="cart-items">
    <div class="row cart-item border-bottom py-3">
      <div class="col-md-2">
        <!-- 상품 이미지 -->
        <img src="images/book1.jpg" class="img-fluid" alt="Book 1">
      </div>
      <div class="col-md-4">
        <h5>책 제목 1</h5>
        <p>저자: John Doe</p>
      </div>
      <div class="col-md-3">
        <!-- 수량 증가/감소 버튼 -->
        <div class="input-group">
          <button class="btn btn-outline-secondary decrease-qty" type="button">-</button>
          <input type="text" class="form-control text-center qty-input" value="1" readonly>
          <button class="btn btn-outline-secondary increase-qty" type="button">+</button>
        </div>
      </div>
      <div class="col-md-2">
        <!-- 가격 -->
        <span class="price">20,000원</span>
      </div>
      <div class="col-md-1">
        <button class="btn btn-danger remove-item">X</button>
      </div>
    </div>
  </div>

  <!-- 총 금액 및 배송 정보 -->
  <div class="row mt-3">
    <div class="col-md-6">
      <h4>배송 정보</h4>
      <p>무료 배송 - 2~3 영업일 소요</p>
      <p>기본 배송 방법</p>
    </div>
    <div class="col-md-6 text-right">
      <h4>총 금액: <span id="total-price">20,000원</span></h4>
    </div>
  </div>

  <!-- 결제 정보 및 주문 버튼 -->
  <div class="row mt-3">
    <div class="col-md-6">
      <h4>결제 방법</h4>
      <ul class="list-unstyled">
        <li><img src="images/visa.jpg" alt="Visa" width="50"> Visa</li>
        <li><img src="images/mastercard.jpg" alt="MasterCard" width="50"> MasterCard</li>
        <li><img src="images/paypal.jpg" alt="PayPal" width="50"> PayPal</li>
      </ul>
    </div>
    <div class="col-md-6 text-right">
      <button class="btn btn-primary mb-2">주문하기</button>
      <button class="btn btn-secondary mb-2">비회원 주문</button>
      <button id="continue-shopping" class="btn btn-light">쇼핑 계속하기</button>
    </div>
  </div>
</div>

<footer th:replace="common/footer :: footer"></footer>

<!-- jQuery 및 JavaScript -->
<script th:src="@{/js/jquery-1.11.0.min.js}"></script>
<script th:src="@{/js/script.js}"></script>

<script>
  $(document).ready(function () {
    // 수량 증가 및 감소 기능
    $('.increase-qty').click(function () {
      let qtyInput = $(this).siblings('.qty-input');
      let currentQty = parseInt(qtyInput.val());
      qtyInput.val(currentQty + 1);
      updateTotal();
    });

    $('.decrease-qty').click(function () {
      let qtyInput = $(this).siblings('.qty-input');
      let currentQty = parseInt(qtyInput.val());
      if (currentQty > 1) {
        qtyInput.val(currentQty - 1);
      }
      updateTotal();
    });

    // 총 금액 업데이트 함수
    function updateTotal() {
      let totalPrice = 0;
      $('.cart-item').each(function () {
        let qty = parseInt($(this).find('.qty-input').val());
        let price = parseFloat($(this).find('.price').text().replace(',', '').replace('원', ''));
        totalPrice += qty * price;
      });
      $('#total-price').text(totalPrice.toLocaleString('ko-KR') + '원');
    }

    // 쇼핑 계속하기 버튼 클릭 시 홈페이지로 이동
    $('#continue-shopping').click(function() {
      window.location.href = '/';
    });
  });
</script>

</body>
</html>